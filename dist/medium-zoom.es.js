/*
 * medium-zoom v0.3.0
 * Medium zoom on your images in vanilla JavaScript
 * Copyright 2018 Francois Chalifour
 * https://github.com/francoischalifour/medium-zoom
 * MIT License
 */function __$styleInject(a,b){void 0===b&&(b={});var c=b.insertAt;if(a&&'undefined'!=typeof document){var d=document.head||document.getElementsByTagName('head')[0],e=document.createElement('style');e.type='text/css','top'===c?d.firstChild?d.insertBefore(e,d.firstChild):d.appendChild(e):d.appendChild(e),e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a))}}var _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},toConsumableArray=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},SUPPORTED_FORMATS=['IMG'],KEY_ESC=27,KEY_Q=81,CANCEL_KEYS=[KEY_ESC,KEY_Q],DEFAULT_OPTIONS={container:'',template:'',margin:0,scrollOffset:48,metaClick:!0,overlayStyles:{backgroundColor:'#fff'},imgStyles:{}},isSupported=function(a){return SUPPORTED_FORMATS.includes(a.tagName)},isScaled=function(a){return a.naturalWidth!==a.width},isListOrCollection=function(a){return NodeList.prototype.isPrototypeOf(a)||HTMLCollection.prototype.isPrototypeOf(a)},isNode=function(a){return a&&1===a.nodeType},mediumZoom=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:DEFAULT_OPTIONS,c=b.margin,d=void 0===c?DEFAULT_OPTIONS.margin:c,e=b.scrollOffset,f=void 0===e?DEFAULT_OPTIONS.scrollOffset:e,g=b.metaClick,h=void 0===g?DEFAULT_OPTIONS.metaClick:g,i=b.container,j=void 0===i?DEFAULT_OPTIONS.container:i,k=b.overlayStyles,l=void 0===k?DEFAULT_OPTIONS.overlayStyles:k,m=b.imgStyles,n=void 0===m?DEFAULT_OPTIONS.imgStyles:m,o=b.template,p=void 0===o?DEFAULT_OPTIONS.template:o,q=function(a,b){var c=Object.keys(a);c.forEach(function(c){b.style[c]=a[c]})},r=function(a,b){var c=a.getBoundingClientRect(),d=c.top,e=c.left,f=c.width,g=c.height,h=a.cloneNode(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,j=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return h.removeAttribute('id'),h.style.position='absolute',h.style.top=d+i+'px',h.style.left=e+j+'px',h.style.width=f+'px',h.style.height=g+'px',h.style.transform='',b&&q(b,h),h},s=function(){if(E.original){if(E.original.dispatchEvent(new Event('show')),F=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,G=!0,E.zoomed=r(E.original,n),document.body.appendChild(D),B.template){var a=isNode(B.template)?B.template:document.querySelector(B.template);E.template=document.createElement('div'),E.template.appendChild(a.content.cloneNode(!0)),document.body.appendChild(E.template)}if(document.body.appendChild(E.zoomed),requestAnimationFrame(function(){document.body.classList.add('medium-zoom--open')}),E.original.style.visibility='hidden',E.zoomed.classList.add('medium-zoom-image--open'),E.zoomed.addEventListener('click',t),E.zoomed.addEventListener('transitionend',w),E.original.getAttribute('data-zoom-target')){E.zoomedHd=E.zoomed.cloneNode(),E.zoomedHd.src=E.zoomed.getAttribute('data-zoom-target'),E.zoomedHd.onerror=function(){clearInterval(b),console.error('Unable to reach the zoom image target '+E.zoomedHd.src),E.zoomedHd=null,A()};var b=setInterval(function(){E.zoomedHd.naturalWidth&&(clearInterval(b),E.zoomedHd.classList.add('medium-zoom-image--open'),E.zoomedHd.addEventListener('click',t),document.body.appendChild(E.zoomedHd),A())},10)}else A()}},t=function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=function(){G||!E.original||(E.original.dispatchEvent(new Event('hide')),G=!0,document.body.classList.remove('medium-zoom--open'),E.zoomed.style.transform='',E.zoomedHd&&(E.zoomedHd.style.transform='',E.zoomedHd.removeEventListener('click',a)),E.template&&(E.template.style.transition='opacity 150ms',E.template.style.opacity=0),E.zoomed.removeEventListener('click',a),E.zoomed.addEventListener('transitionend',x))};0<b?setTimeout(c,b):c()},u=function(a){a&&a.target?(E.original=a.target,s()):E.original?t():(E.original=C[0],s())},v=function(a){return(a.metaKey||a.ctrlKey)&&B.metaClick?window.open(a.target.getAttribute('data-original')||a.target.parentNode.href||a.target.src,'_blank'):void(a.preventDefault(),u(a))},w=function a(){G=!1,E.zoomed.removeEventListener('transitionend',a),E.original.dispatchEvent(new Event('shown'))},x=function a(){E.original&&(E.original.style.visibility='',document.body.removeChild(E.zoomed),E.zoomedHd&&document.body.removeChild(E.zoomedHd),document.body.removeChild(D),E.zoomed.classList.remove('medium-zoom-image--open'),E.template&&document.body.removeChild(E.template),G=!1,E.zoomed.removeEventListener('transitionend',a),E.original.dispatchEvent(new Event('hidden')),E.original=null,E.zoomed=null,E.zoomedHd=null,E.template=null)},y=function(){if(!G&&E.original){var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(F-a)>B.scrollOffset&&t(150)}},z=function(a){CANCEL_KEYS.includes(a.keyCode||a.which)&&t()},A=function(){var a=Math.min;if(E.original){var b,c,d={width:window.innerWidth,height:window.innerHeight,left:0,top:0,right:0,bottom:0};if(B.container)if(B.container instanceof Object)_extends(d,B.container),b=d.width-d.left-d.right-2*B.margin,c=d.height-d.top-d.bottom-2*B.margin;else{var e=isNode(B.container)?B.container:document.querySelector(B.container),f=e.getBoundingClientRect(),g=f.width,h=f.height,i=f.left,j=f.top;_extends(d,{width:g,height:h,left:i,top:j})}b=b||d.width-2*B.margin,c=c||d.height-2*B.margin;var k=E.zoomedHd||E.original,l=k.naturalWidth,m=void 0===l?b:l,n=k.naturalHeight,o=void 0===n?c:n,p=k.getBoundingClientRect(),q=p.top,r=p.left,s=p.width,t=p.height,u=a(m,b)/s,v=a(o,c)/t,w=a(u,v)||1,x=(-r+(b-s)/2+B.margin+d.left)/w,y=(-q+(c-t)/2+B.margin+d.top)/w,z='scale('+w+') translate3d('+x+'px, '+y+'px, 0)';E.zoomed.style.transform=z,E.zoomedHd&&(E.zoomedHd.style.transform=z)}},B={margin:d,overlayStyles:l,imgStyles:n,scrollOffset:f,metaClick:h,container:j,template:p};a instanceof Object&&_extends(B,a);var C=function(a){try{return Array.isArray(a)?a.filter(isSupported):isListOrCollection(a)?[].concat(toConsumableArray(a)).filter(isSupported):isNode(a)?[a].filter(isSupported):'string'==typeof a?[].concat(toConsumableArray(document.querySelectorAll(a))).filter(isSupported):[].concat(toConsumableArray(document.querySelectorAll(SUPPORTED_FORMATS.map(function(a){return a.toLowerCase()}).join(',')))).filter(isScaled)}catch(a){throw new TypeError('The provided selector is invalid.\nExpects a CSS selector, a Node element, a NodeList, an HTMLCollection or an array.\nSee: https://github.com/francoischalifour/medium-zoom')}}(a),D=function(a){var b=document.createElement('div');return b.classList.add('medium-zoom-overlay'),q(a,b),b}(B.overlayStyles),E={original:null,zoomed:null,zoomedHd:null,template:null},F=0,G=!1;return C.forEach(function(a){a.classList.add('medium-zoom-image'),a.addEventListener('click',v)}),D.addEventListener('click',t),document.addEventListener('scroll',y),document.addEventListener('keyup',z),window.addEventListener('resize',t),{show:u,hide:t,toggle:u,update:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return a.overlayStyles&&q(a.overlayStyles,D),a.imgStyles&&E.zoomed&&q(a.imgStyles,E.zoomed),a.container&&a.container instanceof Object&&(a.container=_extends({},B.container,a.container)),_extends(B,a)},addEventListeners:function(a,b){C.forEach(function(c){c.addEventListener(a,b)})},detach:function(){var a=function a(){var b=new Event('detach');C.forEach(function(a){a.classList.remove('medium-zoom-image'),a.removeEventListener('click',v),a.dispatchEvent(b)}),C.splice(0,C.length),D.removeEventListener('click',t),document.removeEventListener('scroll',y),document.removeEventListener('keyup',z),window.removeEventListener('resize',t),E.zoomed&&E.zoomed.removeEventListener('transitionend',a)};E.zoomed?(t(),E.zoomed.addEventListener('transitionend',requestAnimationFrame(a))):a()},images:C,options:B}},mediumZoom$2=Object.freeze({default:mediumZoom});__$styleInject('.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--open .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s}.medium-zoom-image--open{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}',{});var mediumZoom$3=mediumZoom$2&&mediumZoom||mediumZoom$2,src=mediumZoom$3;export default src;
